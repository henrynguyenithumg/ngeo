!function(e){function t(t){for(var o,i,l=t[0],s=t[1],u=t[2],f=0,c=[];f<l.length;f++)i=l[f],n[i]&&c.push(n[i][0]),n[i]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);for(d&&d(t);c.length;)c.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],o=!0,l=1;l<r.length;l++){var s=r[l];0!==n[s]&&(o=!1)}o&&(a.splice(t--,1),e=i(i.s=r[0]))}return e}var o={},n={10:0},a=[];function i(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=o,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var l=window.webpackJsonp=window.webpackJsonp||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var d=s;a.push([339,0]),r()}({336:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={LINE_STRING:"LineString",POINT:"Point",POLYGON:"Polygon"}},337:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=M(r(9)),n=M(r(178)),a=M(r(336)),i=M(r(179)),l=b(r(1)),s=M(r(31)),u=b(r(69)),d=b(r(7)),f=b(r(57)),c=M(r(335)),p=M(r(22)),h=M(r(59)),g=M(r(99)),y=M(r(116)),_=M(r(115)),v=M(r(41)),m=M(r(37)),S=M(r(114)),C=M(r(74)),w=M(r(71)),P=M(r(50)),L=M(r(155));function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function M(e){return e&&e.__esModule?e:{default:e}}var F=function e(t){c.default.call(this);var r=void 0!==t?t:{};this.accuracy_=void 0!==r.accuracy?r.accuracy:e.ACCURACY_,this.encodeStyles_=void 0===r.encodeStyles||r.encodeStyles,this.propertiesFunction_=void 0!==r.properties?r.properties:e.defaultPropertiesFunction_,this.setStyle_=void 0===r.setStyle||r.setStyle,this.prevX_=0,this.prevY_=0,e.LegacyProperties_=void 0!==r.propertiesType&&r.propertiesType};l.inherits(F,c.default),F.StyleTypes_={LineString:a.default.LINE_STRING,Point:a.default.POINT,Polygon:a.default.POLYGON,MultiLineString:a.default.LINE_STRING,MultiPoint:a.default.POINT,MultiPolygon:a.default.POLYGON},F.LegacyProperties_={},F.prototype.readFeature,F.prototype.readFeatures,F.prototype.readGeometry,F.prototype.writeFeature,F.prototype.writeFeatures,F.prototype.writeGeometry,F.CHAR64_=".-_!*ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghjkmnpqrstuvwxyz",F.ACCURACY_=.1,F.defaultPropertiesFunction_=function(e){return e.getProperties()},F.encodeSignedNumber_=function(e){var t=e<<1;return e<0&&(t=~t),F.encodeNumber_(t)},F.encodeNumber_=function(e){for(var t="";e>=32;)t+=F.CHAR64_.charAt(32|31&e),e>>=5;return t+=F.CHAR64_.charAt(e)},F.encodeStyles_=function(e,t,r){var n=F.StyleTypes_[t];o.default.assert(void 0!==n);for(var i=0;i<e.length;++i){var l=e[i],s=l.getFill(),u=l.getImage(),d=l.getStroke(),f=l.getText();n==a.default.POLYGON?null!==s&&F.encodeStylePolygon_(s,d,r):n==a.default.LINE_STRING?null!==d&&F.encodeStyleLine_(d,r):n==a.default.POINT&&null!==u&&F.encodeStylePoint_(u,r),null!==f&&F.encodeStyleText_(f,r)}},F.encodeStyleLine_=function(e,t){F.encodeStyleStroke_(e,t)},F.encodeStylePoint_=function(e,t){if(e instanceof S.default){var r=e.getRadius();t.length>0&&t.push("'"),t.push(encodeURIComponent("pointRadius*"+r));var o=e.getFill();null!==o&&F.encodeStyleFill_(o,t);var n=e.getStroke();null!==n&&F.encodeStyleStroke_(n,t)}},F.encodeStylePolygon_=function(e,t,r){F.encodeStyleFill_(e,r),null!==t&&F.encodeStyleStroke_(t,r)},F.encodeStyleFill_=function(e,t,r){var n=void 0!==r?r:"fillColor",a=e.getColor();if(null!==a){o.default.assert(Array.isArray(a),"only supporting fill colors");var l=u.asArray(a);o.default.assert(Array.isArray(l),"fill color must be an array");var s=i.default.rgbArrayToHex(l);t.length>0&&t.push("'"),t.push(encodeURIComponent(n+"*"+s))}},F.encodeStyleStroke_=function(e,t){var r=e.getColor();if(null!==r){o.default.assert(Array.isArray(r));var n=u.asArray(r);o.default.assert(Array.isArray(n),"only supporting stroke colors");var a=i.default.rgbArrayToHex(n);t.length>0&&t.push("'"),t.push(encodeURIComponent("strokeColor*"+a))}var l=e.getWidth();void 0!==l&&(t.length>0&&t.push("'"),t.push(encodeURIComponent("strokeWidth*"+l)))},F.encodeStyleText_=function(e,t){var r=e.getFont();if(void 0!==r){var o=r.split(" ");o.length>=3&&(t.length>0&&t.push("'"),t.push(encodeURIComponent("fontSize*"+o[1])))}var n=e.getFill();null!==n&&F.encodeStyleFill_(n,t,"fontColor")},F.readLineStringGeometry_=function(e){o.default.assert("l("===e.substring(0,2)),o.default.assert(")"==e[e.length-1]),e=e.substring(2,e.length-1);var t=this.decodeCoordinates_(e),r=new h.default(null);return r.setFlatCoordinates(p.default.XY,t),r},F.readMultiLineStringGeometry_=function(e){o.default.assert("L("===e.substring(0,2)),o.default.assert(")"==e[e.length-1]);for(var t=[],r=[],n=(e=e.substring(2,e.length-1)).split("'"),a=0,i=n.length;a<i;++a)t=this.decodeCoordinates_(n[a],t),r[a]=t.length;var l=new g.default(null);return l.setFlatCoordinates(p.default.XY,t,r),l},F.readPointGeometry_=function(e){o.default.assert("p("===e.substring(0,2)),o.default.assert(")"==e[e.length-1]),e=e.substring(2,e.length-1);var t=this.decodeCoordinates_(e);o.default.assert(2===t.length);var r=new v.default(null);return r.setFlatCoordinates(p.default.XY,t),r},F.readMultiPointGeometry_=function(e){o.default.assert("P("===e.substring(0,2)),o.default.assert(")"==e[e.length-1]),e=e.substring(2,e.length-1);var t=this.decodeCoordinates_(e),r=new y.default(null);return r.setFlatCoordinates(p.default.XY,t),r},F.readPolygonGeometry_=function(e){o.default.assert("a("===e.substring(0,2)),o.default.assert(")"==e[e.length-1]);for(var t=[],r=[],n=(e=e.substring(2,e.length-1)).split("'"),a=0,i=n.length;a<i;++a){var l=(t=this.decodeCoordinates_(n[a],t)).length;0===a?(t[l++]=t[0],t[l++]=t[1]):(t[l++]=t[r[a-1]],t[l++]=t[r[a-1]+1]),r[a]=l}var s=new m.default(null);return s.setFlatCoordinates(p.default.XY,t,r),s},F.readMultiPolygonGeometry_=function(e){o.default.assert("A("===e.substring(0,2)),o.default.assert(")"==e[e.length-1]);for(var t=[],r=[],n=(e=e.substring(2,e.length-1)).split(")("),a=0,i=n.length;a<i;++a)for(var l=n[a].split("'"),s=r[a]=[],u=0,d=l.length;u<d;++u){var f=(t=this.decodeCoordinates_(l[u],t)).length;0===u?(t[f++]=t[0],t[f++]=t[1]):(t[f++]=t[s[u-1]],t[f++]=t[s[u-1]+1]),s[u]=f}var c=new _.default(null);return c.setFlatCoordinates(p.default.XY,t,r),c},F.setStyleInFeature_=function(e,t){if(""!=e){var r=F.getStyleProperties_(e,t),o=r.fillColor,n=r.fontSize,a=r.fontColor,i=r.pointRadius,l=r.strokeColor,s=r.strokeWidth,u=null;void 0!==o&&(u=new C.default({color:o}));var d=null;void 0!==l&&void 0!==s&&(d=new w.default({color:l,width:s}));var f=null;void 0!==i&&(f=new S.default({radius:i,fill:u,stroke:d}),u=d=null);var c=null;void 0!==n&&void 0!==a&&(c=new L.default({font:n+" sans-serif",fill:new C.default({color:a})}));var p=new P.default({fill:u,image:f,stroke:d,text:c});t.setStyle(p)}},F.setStyleProperties_=function(e,t){var r=F.getStyleProperties_(e,t),o=t.getGeometry();if(o instanceof v.default?r.isLabel||r[n.default.IS_TEXT]?(delete r.strokeColor,delete r.fillColor):(delete r.fontColor,delete r.fontSize):(delete r.fontColor,o instanceof h.default&&(delete r.fillColor,delete r.fillOpacity)),r.fontSize){var a=parseFloat(r.fontSize);-1!==r.fontSize.indexOf("px")&&(a=Math.round(a/1.333333)),r.fontSize=a}var i={};for(var l in r){var s=r[l];F.LegacyProperties_[l]?i[F.LegacyProperties_[l]]=s:i[l]=s}t.setProperties(i)},F.castValue_=function(e,t){var r=[n.default.ANGLE,n.default.OPACITY,n.default.SIZE,n.default.STROKE,"pointRadius","strokeWidth"],o=[n.default.IS_CIRCLE,n.default.IS_RECTANGLE,n.default.IS_TEXT,n.default.SHOW_MEASURE,n.default.SHOW_LABEL,"isCircle","isRectangle","isLabel","showMeasure","showLabel"];return d.includes(r,e)?+t:d.includes(o,e)?"true"===t:t},F.getStyleProperties_=function(e,t){for(var r=e.split("'"),n={},a=0;a<r.length;++a){var i=decodeURIComponent(r[a]).split("*");o.default.assert(2===i.length);var l=i[0],s=i[1];n[l]=F.castValue_(l,s)}return n},F.writeLineStringGeometry_=function(e){o.default.assertInstanceof(e,h.default);var t=e.getFlatCoordinates(),r=e.getStride(),n=t.length;return"l("+this.encodeCoordinates_(t,r,0,n)+")"},F.writeMultiLineStringGeometry_=function(e){o.default.assertInstanceof(e,g.default);for(var t=e.getEnds(),r=t.length,n=e.getFlatCoordinates(),a=e.getStride(),i=0,l=["L("],s=0;s<r;++s){var u=t[s],d=this.encodeCoordinates_(n,a,i,u);0!==s&&l.push("'"),l.push(d),i=u}return l.push(")"),l.join("")},F.writePointGeometry_=function(e){o.default.assertInstanceof(e,v.default);var t=e.getFlatCoordinates(),r=e.getStride(),n=t.length;return"p("+this.encodeCoordinates_(t,r,0,n)+")"},F.writeMultiPointGeometry_=function(e){o.default.assertInstanceof(e,y.default);var t=e.getFlatCoordinates(),r=e.getStride(),n=t.length;return"P("+this.encodeCoordinates_(t,r,0,n)+")"},F.encodeRings_=function(e,t,r,o,n){for(var a=o.length,i=0;i<a;++i){var l=o[i]-t,s=this.encodeCoordinates_(e,t,r,l);0!==i&&n.push("'"),n.push(s),r=o[i]}return r},F.writePolygonGeometry_=function(e){o.default.assertInstanceof(e,m.default);var t=e.getFlatCoordinates(),r=e.getStride(),n=e.getEnds(),a=["a("];return F.encodeRings_.call(this,t,r,0,n,a),a.push(")"),a.join("")},F.writeMultiPolygonGeometry_=function(e){o.default.assertInstanceof(e,_.default);for(var t=e.getFlatCoordinates(),r=e.getStride(),n=e.getEndss(),a=n.length,i=0,l=["A"],s=0;s<a;++s){var u=n[s];l.push("("),i=F.encodeRings_.call(this,t,r,i,u,l),l.push(")")}return l.join("")},F.GEOMETRY_READERS_={P:F.readMultiPointGeometry_,L:F.readMultiLineStringGeometry_,A:F.readMultiPolygonGeometry_,l:F.readLineStringGeometry_,p:F.readPointGeometry_,a:F.readPolygonGeometry_},F.GEOMETRY_WRITERS_={MultiLineString:F.writeMultiLineStringGeometry_,MultiPoint:F.writeMultiPointGeometry_,MultiPolygon:F.writeMultiPolygonGeometry_,LineString:F.writeLineStringGeometry_,Point:F.writePointGeometry_,Polygon:F.writePolygonGeometry_},F.prototype.decodeCoordinates_=function(e,t){for(var r=e.length,o=0,n=void 0!==t?t:[],a=n.length;o<r;){var i=void 0,l=0,s=0;do{s|=(31&(i=F.CHAR64_.indexOf(e.charAt(o++))))<<l,l+=5}while(i>=32);var u=1&s?~(s>>1):s>>1;this.prevX_+=u,l=0,s=0;do{s|=(31&(i=F.CHAR64_.indexOf(e.charAt(o++))))<<l,l+=5}while(i>=32);var d=1&s?~(s>>1):s>>1;this.prevY_+=d,n[a++]=this.prevX_*this.accuracy_,n[a++]=this.prevY_*this.accuracy_}return n},F.prototype.encodeCoordinates_=function(e,t,r,o){for(var n="",a=r;a<o;a+=t){var i=e[a],l=e[a+1];i=Math.floor(i/this.accuracy_),l=Math.floor(l/this.accuracy_);var s=i-this.prevX_,u=l-this.prevY_;this.prevX_=i,this.prevY_=l,n+=F.encodeSignedNumber_(s)+F.encodeSignedNumber_(u)}return n},F.prototype.readFeatureFromText=function(e,t){o.default.assert(e.length>2),o.default.assert("("===e[1]),o.default.assert(")"===e[e.length-1]);var r=e.indexOf("~"),n=r>=0?e.substring(0,r)+")":e,a=this.readGeometryFromText(n,t),i=new s.default(a);if(r>=0){var l=e.substring(r+1,e.length-1),u=(r=l.indexOf("~"))>=0?l.substring(0,r):l;if(""!=u)for(var d=u.split("'"),f=0;f<d.length;++f){var c=decodeURIComponent(d[f]).split("*");o.default.assert(2===c.length);var p=c[0],h=c[1];!this.setStyle_&&F.LegacyProperties_[p]&&(p=F.LegacyProperties_[p]),i.set(p,F.castValue_(p,h))}if(r>=0){var g=l.substring(r+1);this.setStyle_?F.setStyleInFeature_(g,i):F.setStyleProperties_(g,i)}}return i},F.prototype.readFeaturesFromText=function(e,t){o.default.assert("F"===e[0]);var r=[];for(e=e.substring(1);e.length>0;){var n=e.indexOf(")");o.default.assert(n>=0);var a=this.readFeatureFromText(e.substring(0,n+1),t);r.push(a),e=e.substring(n+1)}return r},F.prototype.readGeometryFromText=function(e,t){var r=F.GEOMETRY_READERS_[e[0]];return o.default.assert(void 0!==r),this.prevX_=0,this.prevY_=0,r.call(this,e)},F.prototype.writeFeatureText=function(e,t){var r=[],n="",a=e.getGeometry();a&&(n=this.writeGeometryText(a,t)),n.length>0&&(o.default.assert(")"===n[n.length-1]),n=n.substring(0,n.length-1),r.push(n));var i=[],l=this.propertiesFunction_(e);for(var s in l){var u=l[s];if(void 0!==u&&null!==u&&s!==e.getGeometryName()){0!==i.length&&i.push("'");var d=encodeURIComponent(s.replace(/[()'*]/g,"_")+"*"+u.toString().replace(/[()'*]/g,"_"));i.push(d)}}if(i.length>0&&(r.push("~"),Array.prototype.push.apply(r,i)),this.encodeStyles_){var f=e.getStyleFunction();if(void 0!==f){var c=f.call(e,0);if(null!==c){var p=[];c=Array.isArray(c)?c:[c],F.encodeStyles_(c,a.getType(),p),p.length>0&&(r.push("~"),Array.prototype.push.apply(r,p))}}}return r.push(")"),r.join("")},F.prototype.writeFeaturesText=function(e,t){var r=[];if(e.length>0){r.push("F");for(var o=0,n=e.length;o<n;++o)r.push(this.writeFeatureText(e[o],t))}return r.join("")},F.prototype.writeGeometryText=function(e,t){var r=F.GEOMETRY_WRITERS_[e.getType()];o.default.assert(void 0!==r);var n=f.transformWithOptions(e,!0,t);return this.prevX_=0,this.prevY_=0,r.call(this,n)},t.default=F},338:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(509),r(18);var o=y(r(337)),n=y(r(47)),a=y(r(209)),i=y(r(165)),l=y(r(264)),s=y(r(39)),u=y(r(129)),d=y(r(48)),f=y(r(64)),c=y(r(60)),p=y(r(53)),h=y(r(71)),g=y(r(50));function y(e){return e&&e.__esModule?e:{default:e}}var _={};_.module=angular.module("app",[n.default.name,a.default.name,l.default.name]),_.mapComponent={controller:"AppMapController as ctrl",bindings:{map:"=appMap"},template:"<div ngeo-map=ctrl.map></div>"},_.module.component("appMap",_.mapComponent),_.MapComponentController=function(e,t){this.map,this.ngeoLocation_=e,this.ngeoDebounce_=t},_.MapComponentController.$inject=["ngeoLocation","ngeoDebounce"],_.module.controller("AppMapController",_.MapComponentController),_.MapComponentController.prototype.$onInit=function(){var e=this,t=this.map.getView(),r=this.ngeoLocation_.getParam("z");r=void 0!==r?+r:4;var o=this.ngeoLocation_.getParam("x"),n=this.ngeoLocation_.getParam("y"),a=void 0!==o&&void 0!==n?[+o,+n]:[0,0];t.setCenter(a),t.setZoom(r),this.ngeoLocation_.updateParams({z:r,x:Math.round(a[0]),y:Math.round(a[1])}),t.on("propertychange",this.ngeoDebounce_(function(r){var o=t.getCenter(),n={z:t.getZoom(),x:Math.round(o[0]),y:Math.round(o[1])};e.ngeoLocation_.updateParams(n)},300,!0))},_.drawComponent={controller:"AppDrawController as ctrl",bindings:{map:"=appDrawMap",layer:"=appDrawLayer"},template:'<label>Enable drawing:<input type="checkbox" ng-model="ctrl.interaction.active" /></label><br><button ng-click="ctrl.clearLayer()">Clear layer</button>'},_.module.component("appDraw",_.drawComponent),_.DrawComponentController=function(e,t){this.map,this.layer,this.ngeoLocation_=t,this.scope_=e,this.featureSeq_=0,this.interaction},_.DrawComponentController.$inject=["$scope","ngeoLocation"],_.DrawComponentController.prototype.$onInit=function(){var e=this,t=this.layer.getSource();this.interaction=new u.default({type:"LineString",source:t}),this.interaction.setActive(!1),this.map.addInteraction(this.interaction),i.default.interaction(this.interaction),this.interaction.on("drawend",function(e){e.feature.set("id",++this.featureSeq_)},this);var r=new o.default;t.on("addfeature",function(o){o.feature.setStyle(new g.default({stroke:new h.default({color:[255,0,0,1],width:2})}));var n=t.getFeatures(),a=r.writeFeatures(n);e.scope_.$applyAsync(function(){e.ngeoLocation_.updateParams({features:a})})});var n=this.ngeoLocation_.getParam("features");if(void 0!==n){var a=r.readFeatures(n);this.featureSeq_=a.length,t.addFeatures(a)}},_.DrawComponentController.prototype.clearLayer=function(){this.layer.getSource().clear(!0),this.featureSeq_=0,this.ngeoLocation_.deleteParam("features")},_.module.controller("AppDrawController",_.DrawComponentController),_.MainController=function(){this.map=new s.default({layers:[new d.default({source:new c.default})]});var e=new p.default;this.vectorLayer=new f.default({source:e}),this.vectorLayer.setMap(this.map)},_.module.controller("MainController",_.MainController),t.default=_},339:function(e,t,r){r(18),r(35),e.exports=r(338)},509:function(e,t){}});
//# sourceMappingURL=permalink.0b6dbb97bf7217aa7bfa.js.map