webpackJsonp([9],{4:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=r(5);const a=function(e){const t=e||{};let r;r=void 0!==t.attributions?t.attributions:[a.ATTRIBUTION];const o=void 0!==t.crossOrigin?t.crossOrigin:"anonymous",i=void 0!==t.url?t.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";n.a.call(this,{attributions:r,cacheSize:t.cacheSize,crossOrigin:o,opaque:void 0===t.opaque||t.opaque,maxZoom:void 0!==t.maxZoom?t.maxZoom:19,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,url:i,wrapX:t.wrapX})};Object(o.inherits)(a,n.a),a.ATTRIBUTION='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.',t.default=a},494:function(e,t,r){r(9),e.exports=r(495)},495:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(496),r(10);var o=y(r(497)),n=y(r(15)),a=y(r(178)),i=y(r(102)),l=y(r(293)),s=y(r(12)),u=y(r(63)),d=y(r(17)),c=y(r(29)),p=y(r(4)),f=y(r(25)),h=y(r(42)),g=y(r(23));function y(e){return e&&e.__esModule?e:{default:e}}var _={};_.module=angular.module("app",[n.default.name,a.default.name,l.default.name]),_.mapComponent={controller:"AppMapController as ctrl",bindings:{map:"=appMap"},template:"<div ngeo-map=ctrl.map></div>"},_.module.component("appMap",_.mapComponent),_.MapComponentController=function(e,t){this.map,this.ngeoLocation_=e,this.ngeoDebounce_=t},_.MapComponentController.$inject=["ngeoLocation","ngeoDebounce"],_.module.controller("AppMapController",_.MapComponentController),_.MapComponentController.prototype.$onInit=function(){var e=this,t=this.map.getView(),r=this.ngeoLocation_.getParam("z");r=void 0!==r?+r:4;var o=this.ngeoLocation_.getParam("x"),n=this.ngeoLocation_.getParam("y"),a=void 0!==o&&void 0!==n?[+o,+n]:[0,0];t.setCenter(a),t.setZoom(r),this.ngeoLocation_.updateParams({z:r,x:Math.round(a[0]),y:Math.round(a[1])}),t.on("propertychange",this.ngeoDebounce_(function(r){var o=t.getCenter(),n={z:t.getZoom(),x:Math.round(o[0]),y:Math.round(o[1])};e.ngeoLocation_.updateParams(n)},300,!0))},_.drawComponent={controller:"AppDrawController as ctrl",bindings:{map:"=appDrawMap",layer:"=appDrawLayer"},template:'<label>Enable drawing:<input type="checkbox" ng-model="ctrl.interaction.active" /></label><br><button ng-click="ctrl.clearLayer()">Clear layer</button>'},_.module.component("appDraw",_.drawComponent),_.DrawComponentController=function(e,t){this.map,this.layer,this.ngeoLocation_=t,this.scope_=e,this.featureSeq_=0,this.interaction},_.DrawComponentController.$inject=["$scope","ngeoLocation"],_.DrawComponentController.prototype.$onInit=function(){var e=this,t=this.layer.getSource();this.interaction=new u.default({type:"LineString",source:t}),this.interaction.setActive(!1),this.map.addInteraction(this.interaction),i.default.interaction(this.interaction),this.interaction.on("drawend",function(e){e.feature.set("id",++this.featureSeq_)},this);var r=new o.default;t.on("addfeature",function(o){o.feature.setStyle(new g.default({stroke:new h.default({color:[255,0,0,1],width:2})}));var n=t.getFeatures(),a=r.writeFeatures(n);e.scope_.$applyAsync(function(){e.ngeoLocation_.updateParams({features:a})})});var n=this.ngeoLocation_.getParam("features");if(void 0!==n){var a=r.readFeatures(n);this.featureSeq_=a.length,t.addFeatures(a)}},_.DrawComponentController.prototype.clearLayer=function(){this.layer.getSource().clear(!0),this.featureSeq_=0,this.ngeoLocation_.deleteParam("features")},_.module.controller("AppDrawController",_.DrawComponentController),_.MainController=function(){this.map=new s.default({layers:[new d.default({source:new p.default})]});var e=new f.default;this.vectorLayer=new c.default({source:e}),this.vectorLayer.setMap(this.map)},_.module.controller("MainController",_.MainController),t.default=_},496:function(e,t){},497:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=b(r(2)),n=b(r(113)),a=b(r(498)),i=b(r(112)),l=T(r(0)),s=b(r(18)),u=T(r(51)),d=T(r(7)),c=T(r(69)),p=b(r(499)),f=b(r(47)),h=b(r(36)),g=b(r(77)),y=b(r(87)),_=b(r(88)),v=b(r(24)),m=b(r(22)),S=b(r(59)),C=b(r(41)),w=b(r(42)),P=b(r(23)),F=b(r(115));function T(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function b(e){return e&&e.__esModule?e:{default:e}}var L=function e(t){p.default.call(this);var r=void 0!==t?t:{};this.accuracy_=void 0!==r.accuracy?r.accuracy:e.ACCURACY_,this.encodeStyles_=void 0===r.encodeStyles||r.encodeStyles,this.propertiesFunction_=void 0!==r.properties?r.properties:e.defaultPropertiesFunction_,this.setStyle_=void 0===r.setStyle||r.setStyle,this.prevX_=0,this.prevY_=0,e.LegacyProperties_=void 0!==r.propertiesType&&r.propertiesType};l.inherits(L,p.default),L.StyleTypes_={LineString:a.default.LINE_STRING,Point:a.default.POINT,Polygon:a.default.POLYGON,MultiLineString:a.default.LINE_STRING,MultiPoint:a.default.POINT,MultiPolygon:a.default.POLYGON},L.LegacyProperties_={},L.prototype.readFeature,L.prototype.readFeatures,L.prototype.readGeometry,L.prototype.writeFeature,L.prototype.writeFeatures,L.prototype.writeGeometry,L.CHAR64_=".-_!*ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghjkmnpqrstuvwxyz",L.ACCURACY_=.1,L.defaultPropertiesFunction_=function(e){return e.getProperties()},L.encodeSignedNumber_=function(e){var t=e<<1;return e<0&&(t=~t),L.encodeNumber_(t)},L.encodeNumber_=function(e){for(var t="";e>=32;)t+=L.CHAR64_.charAt(32|31&e),e>>=5;return t+=L.CHAR64_.charAt(e)},L.encodeStyles_=function(e,t,r){var n=L.StyleTypes_[t];o.default.assert(void 0!==n);for(var i=0;i<e.length;++i){var l=e[i],s=l.getFill(),u=l.getImage(),d=l.getStroke(),c=l.getText();n==a.default.POLYGON?null!==s&&L.encodeStylePolygon_(s,d,r):n==a.default.LINE_STRING?null!==d&&L.encodeStyleLine_(d,r):n==a.default.POINT&&null!==u&&L.encodeStylePoint_(u,r),null!==c&&L.encodeStyleText_(c,r)}},L.encodeStyleLine_=function(e,t){L.encodeStyleStroke_(e,t)},L.encodeStylePoint_=function(e,t){if(e instanceof S.default){var r=e.getRadius();t.length>0&&t.push("'"),t.push(encodeURIComponent("pointRadius*"+r));var o=e.getFill();null!==o&&L.encodeStyleFill_(o,t);var n=e.getStroke();null!==n&&L.encodeStyleStroke_(n,t)}},L.encodeStylePolygon_=function(e,t,r){L.encodeStyleFill_(e,r),null!==t&&L.encodeStyleStroke_(t,r)},L.encodeStyleFill_=function(e,t,r){var n=void 0!==r?r:"fillColor",a=e.getColor();if(null!==a){o.default.assert(Array.isArray(a),"only supporting fill colors");var l=u.asArray(a);o.default.assert(Array.isArray(l),"fill color must be an array");var s=i.default.rgbArrayToHex(l);t.length>0&&t.push("'"),t.push(encodeURIComponent(n+"*"+s))}},L.encodeStyleStroke_=function(e,t){var r=e.getColor();if(null!==r){o.default.assert(Array.isArray(r));var n=u.asArray(r);o.default.assert(Array.isArray(n),"only supporting stroke colors");var a=i.default.rgbArrayToHex(n);t.length>0&&t.push("'"),t.push(encodeURIComponent("strokeColor*"+a))}var l=e.getWidth();void 0!==l&&(t.length>0&&t.push("'"),t.push(encodeURIComponent("strokeWidth*"+l)))},L.encodeStyleText_=function(e,t){var r=e.getFont();if(void 0!==r){var o=r.split(" ");o.length>=3&&(t.length>0&&t.push("'"),t.push(encodeURIComponent("fontSize*"+o[1])))}var n=e.getFill();null!==n&&L.encodeStyleFill_(n,t,"fontColor")},L.readLineStringGeometry_=function(e){o.default.assert("l("===e.substring(0,2)),o.default.assert(")"==e[e.length-1]),e=e.substring(2,e.length-1);var t=this.decodeCoordinates_(e),r=new h.default(null);return r.setFlatCoordinates(f.default.XY,t),r},L.readMultiLineStringGeometry_=function(e){o.default.assert("L("===e.substring(0,2)),o.default.assert(")"==e[e.length-1]);for(var t=[],r=[],n=(e=e.substring(2,e.length-1)).split("'"),a=0,i=n.length;a<i;++a)t=this.decodeCoordinates_(n[a],t),r[a]=t.length;var l=new g.default(null);return l.setFlatCoordinates(f.default.XY,t,r),l},L.readPointGeometry_=function(e){o.default.assert("p("===e.substring(0,2)),o.default.assert(")"==e[e.length-1]),e=e.substring(2,e.length-1);var t=this.decodeCoordinates_(e);o.default.assert(2===t.length);var r=new v.default(null);return r.setFlatCoordinates(f.default.XY,t),r},L.readMultiPointGeometry_=function(e){o.default.assert("P("===e.substring(0,2)),o.default.assert(")"==e[e.length-1]),e=e.substring(2,e.length-1);var t=this.decodeCoordinates_(e),r=new y.default(null);return r.setFlatCoordinates(f.default.XY,t),r},L.readPolygonGeometry_=function(e){o.default.assert("a("===e.substring(0,2)),o.default.assert(")"==e[e.length-1]);for(var t=[],r=[],n=(e=e.substring(2,e.length-1)).split("'"),a=0,i=n.length;a<i;++a){var l=(t=this.decodeCoordinates_(n[a],t)).length;0===a?(t[l++]=t[0],t[l++]=t[1]):(t[l++]=t[r[a-1]],t[l++]=t[r[a-1]+1]),r[a]=l}var s=new m.default(null);return s.setFlatCoordinates(f.default.XY,t,r),s},L.readMultiPolygonGeometry_=function(e){o.default.assert("A("===e.substring(0,2)),o.default.assert(")"==e[e.length-1]);for(var t=[],r=[],n=(e=e.substring(2,e.length-1)).split(")("),a=0,i=n.length;a<i;++a)for(var l=n[a].split("'"),s=r[a]=[],u=0,d=l.length;u<d;++u){var c=(t=this.decodeCoordinates_(l[u],t)).length;0===u?(t[c++]=t[0],t[c++]=t[1]):(t[c++]=t[s[u-1]],t[c++]=t[s[u-1]+1]),s[u]=c}var p=new _.default(null);return p.setFlatCoordinates(f.default.XY,t,r),p},L.setStyleInFeature_=function(e,t){if(""!=e){var r=L.getStyleProperties_(e,t),o=r.fillColor,n=r.fontSize,a=r.fontColor,i=r.pointRadius,l=r.strokeColor,s=r.strokeWidth,u=null;void 0!==o&&(u=new C.default({color:o}));var d=null;void 0!==l&&void 0!==s&&(d=new w.default({color:l,width:s}));var c=null;void 0!==i&&(c=new S.default({radius:i,fill:u,stroke:d}),u=d=null);var p=null;void 0!==n&&void 0!==a&&(p=new F.default({font:n+" sans-serif",fill:new C.default({color:a})}));var f=new P.default({fill:u,image:c,stroke:d,text:p});t.setStyle(f)}},L.setStyleProperties_=function(e,t){var r=L.getStyleProperties_(e,t),o=t.getGeometry();if(o instanceof v.default?r.isLabel||r[n.default.IS_TEXT]?(delete r.strokeColor,delete r.fillColor):(delete r.fontColor,delete r.fontSize):(delete r.fontColor,o instanceof h.default&&(delete r.fillColor,delete r.fillOpacity)),r.fontSize){var a=parseFloat(r.fontSize);-1!==r.fontSize.indexOf("px")&&(a=Math.round(a/1.333333)),r.fontSize=a}var i={};for(var l in r){var s=r[l];L.LegacyProperties_[l]?i[L.LegacyProperties_[l]]=s:i[l]=s}t.setProperties(i)},L.castValue_=function(e,t){var r=[n.default.ANGLE,n.default.OPACITY,n.default.SIZE,n.default.STROKE,"pointRadius","strokeWidth"],o=[n.default.IS_CIRCLE,n.default.IS_RECTANGLE,n.default.IS_TEXT,n.default.SHOW_MEASURE,n.default.SHOW_LABEL,"isCircle","isRectangle","isLabel","showMeasure","showLabel"];return d.includes(r,e)?+t:d.includes(o,e)?"true"===t:t},L.getStyleProperties_=function(e,t){for(var r=e.split("'"),n={},a=0;a<r.length;++a){var i=decodeURIComponent(r[a]).split("*");o.default.assert(2===i.length);var l=i[0],s=i[1];n[l]=L.castValue_(l,s)}return n},L.writeLineStringGeometry_=function(e){o.default.assertInstanceof(e,h.default);var t=e.getFlatCoordinates(),r=e.getStride(),n=t.length;return"l("+this.encodeCoordinates_(t,r,0,n)+")"},L.writeMultiLineStringGeometry_=function(e){o.default.assertInstanceof(e,g.default);for(var t=e.getEnds(),r=t.length,n=e.getFlatCoordinates(),a=e.getStride(),i=0,l=["L("],s=0;s<r;++s){var u=t[s],d=this.encodeCoordinates_(n,a,i,u);0!==s&&l.push("'"),l.push(d),i=u}return l.push(")"),l.join("")},L.writePointGeometry_=function(e){o.default.assertInstanceof(e,v.default);var t=e.getFlatCoordinates(),r=e.getStride(),n=t.length;return"p("+this.encodeCoordinates_(t,r,0,n)+")"},L.writeMultiPointGeometry_=function(e){o.default.assertInstanceof(e,y.default);var t=e.getFlatCoordinates(),r=e.getStride(),n=t.length;return"P("+this.encodeCoordinates_(t,r,0,n)+")"},L.encodeRings_=function(e,t,r,o,n){for(var a=o.length,i=0;i<a;++i){var l=o[i]-t,s=this.encodeCoordinates_(e,t,r,l);0!==i&&n.push("'"),n.push(s),r=o[i]}return r},L.writePolygonGeometry_=function(e){o.default.assertInstanceof(e,m.default);var t=e.getFlatCoordinates(),r=e.getStride(),n=e.getEnds(),a=["a("];return L.encodeRings_.call(this,t,r,0,n,a),a.push(")"),a.join("")},L.writeMultiPolygonGeometry_=function(e){o.default.assertInstanceof(e,_.default);for(var t=e.getFlatCoordinates(),r=e.getStride(),n=e.getEndss(),a=n.length,i=0,l=["A"],s=0;s<a;++s){var u=n[s];l.push("("),i=L.encodeRings_.call(this,t,r,i,u,l),l.push(")")}return l.join("")},L.GEOMETRY_READERS_={P:L.readMultiPointGeometry_,L:L.readMultiLineStringGeometry_,A:L.readMultiPolygonGeometry_,l:L.readLineStringGeometry_,p:L.readPointGeometry_,a:L.readPolygonGeometry_},L.GEOMETRY_WRITERS_={MultiLineString:L.writeMultiLineStringGeometry_,MultiPoint:L.writeMultiPointGeometry_,MultiPolygon:L.writeMultiPolygonGeometry_,LineString:L.writeLineStringGeometry_,Point:L.writePointGeometry_,Polygon:L.writePolygonGeometry_},L.prototype.decodeCoordinates_=function(e,t){for(var r=e.length,o=0,n=void 0!==t?t:[],a=n.length;o<r;){var i=void 0,l=0,s=0;do{s|=(31&(i=L.CHAR64_.indexOf(e.charAt(o++))))<<l,l+=5}while(i>=32);var u=1&s?~(s>>1):s>>1;this.prevX_+=u,l=0,s=0;do{s|=(31&(i=L.CHAR64_.indexOf(e.charAt(o++))))<<l,l+=5}while(i>=32);var d=1&s?~(s>>1):s>>1;this.prevY_+=d,n[a++]=this.prevX_*this.accuracy_,n[a++]=this.prevY_*this.accuracy_}return n},L.prototype.encodeCoordinates_=function(e,t,r,o){for(var n="",a=r;a<o;a+=t){var i=e[a],l=e[a+1];i=Math.floor(i/this.accuracy_),l=Math.floor(l/this.accuracy_);var s=i-this.prevX_,u=l-this.prevY_;this.prevX_=i,this.prevY_=l,n+=L.encodeSignedNumber_(s)+L.encodeSignedNumber_(u)}return n},L.prototype.readFeatureFromText=function(e,t){o.default.assert(e.length>2),o.default.assert("("===e[1]),o.default.assert(")"===e[e.length-1]);var r=e.indexOf("~"),n=r>=0?e.substring(0,r)+")":e,a=this.readGeometryFromText(n,t),i=new s.default(a);if(r>=0){var l=e.substring(r+1,e.length-1),u=(r=l.indexOf("~"))>=0?l.substring(0,r):l;if(""!=u)for(var d=u.split("'"),c=0;c<d.length;++c){var p=decodeURIComponent(d[c]).split("*");o.default.assert(2===p.length);var f=p[0],h=p[1];!this.setStyle_&&L.LegacyProperties_[f]&&(f=L.LegacyProperties_[f]),i.set(f,L.castValue_(f,h))}if(r>=0){var g=l.substring(r+1);this.setStyle_?L.setStyleInFeature_(g,i):L.setStyleProperties_(g,i)}}return i},L.prototype.readFeaturesFromText=function(e,t){o.default.assert("F"===e[0]);var r=[];for(e=e.substring(1);e.length>0;){var n=e.indexOf(")");o.default.assert(n>=0);var a=this.readFeatureFromText(e.substring(0,n+1),t);r.push(a),e=e.substring(n+1)}return r},L.prototype.readGeometryFromText=function(e,t){var r=L.GEOMETRY_READERS_[e[0]];return o.default.assert(void 0!==r),this.prevX_=0,this.prevY_=0,r.call(this,e)},L.prototype.writeFeatureText=function(e,t){var r=[],n="",a=e.getGeometry();a&&(n=this.writeGeometryText(a,t)),n.length>0&&(o.default.assert(")"===n[n.length-1]),n=n.substring(0,n.length-1),r.push(n));var i=[],l=this.propertiesFunction_(e);for(var s in l){var u=l[s];if(void 0!==u&&null!==u&&s!==e.getGeometryName()){0!==i.length&&i.push("'");var d=encodeURIComponent(s.replace(/[()'*]/g,"_")+"*"+u.toString().replace(/[()'*]/g,"_"));i.push(d)}}if(i.length>0&&(r.push("~"),Array.prototype.push.apply(r,i)),this.encodeStyles_){var c=e.getStyleFunction();if(void 0!==c){var p=c.call(e,0);if(null!==p){var f=[];p=Array.isArray(p)?p:[p],L.encodeStyles_(p,a.getType(),f),f.length>0&&(r.push("~"),Array.prototype.push.apply(r,f))}}}return r.push(")"),r.join("")},L.prototype.writeFeaturesText=function(e,t){var r=[];if(e.length>0){r.push("F");for(var o=0,n=e.length;o<n;++o)r.push(this.writeFeatureText(e[o],t))}return r.join("")},L.prototype.writeGeometryText=function(e,t){var r=L.GEOMETRY_WRITERS_[e.getType()];o.default.assert(void 0!==r);var n=c.transformWithOptions(e,!0,t);return this.prevX_=0,this.prevY_=0,r.call(this,n)},t.default=L},498:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={LINE_STRING:"LineString",POINT:"Point",POLYGON:"Polygon"}},499:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=r(69),a=r(159);const i=function(){n.default.call(this)};function l(e){return"string"==typeof e?e:""}Object(o.inherits)(i,n.default),i.prototype.getType=function(){return a.a.TEXT},i.prototype.readFeature=function(e,t){return this.readFeatureFromText(l(e),this.adaptOptions(t))},i.prototype.readFeatureFromText=function(e,t){},i.prototype.readFeatures=function(e,t){return this.readFeaturesFromText(l(e),this.adaptOptions(t))},i.prototype.readFeaturesFromText=function(e,t){},i.prototype.readGeometry=function(e,t){return this.readGeometryFromText(l(e),this.adaptOptions(t))},i.prototype.readGeometryFromText=function(e,t){},i.prototype.readProjection=function(e){return this.readProjectionFromText(l(e))},i.prototype.readProjectionFromText=function(e){return this.defaultDataProjection},i.prototype.writeFeature=function(e,t){return this.writeFeatureText(e,this.adaptOptions(t))},i.prototype.writeFeatureText=function(e,t){},i.prototype.writeFeatures=function(e,t){return this.writeFeaturesText(e,this.adaptOptions(t))},i.prototype.writeFeaturesText=function(e,t){},i.prototype.writeGeometry=function(e,t){return this.writeGeometryText(e,this.adaptOptions(t))},i.prototype.writeGeometryText=function(e,t){},t.default=i},5:function(e,t,r){"use strict";var o=r(0),n=r(19),a=r(20);const i=function(e){const t=e||{},r=void 0!==t.projection?t.projection:"EPSG:3857",o=void 0!==t.tileGrid?t.tileGrid:Object(a.a)({extent:Object(a.b)(r),maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});n.a.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,opaque:t.opaque,projection:r,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:o,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition})};Object(o.inherits)(i,n.a),t.a=i}},[494]);
//# sourceMappingURL=permalink.451823ce411142b14d5d.js.map